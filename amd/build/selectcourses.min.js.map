{"version":3,"sources":["../src/selectcourses.js"],"names":["define","$","initialise","delay","chars","window","console","log","select2","placeholder","allowClear","minimumInputLength","ajax","url","dataType","data","params","q","term","page","type","processResults","results","items","pagination","more","total_count","cache"],"mappings":"AAUIA,OAAM,mCAAC,CAAC,QAAD,CAAW,2BAAX,CAAD,CAA0C,SAASC,CAAT,CAAY,CACxD,MAAO,CACHC,UAAU,CAAE,oBAAUC,CAAV,CAAiBC,CAAjB,CAAwB,CAEhCC,MAAM,CAACC,OAAP,CAAeC,GAAf,CAAmBH,CAAnB,EAEAH,CAAC,CAAC,qCAAD,CAAD,CAAyCO,OAAzC,CAAiD,CAC7CC,WAAW,CAAE,wBADgC,CAE7CC,UAAU,GAFmC,CAG7CC,kBAAkB,CAAEP,CAHyB,CAI7CQ,IAAI,CAAE,CACFC,GAAG,CAAE,oCADH,CAEFC,QAAQ,CAAE,MAFR,CAGFX,KAAK,CAAEA,CAHL,CAIFY,IAAI,CAAE,cAAUC,CAAV,CAAkB,CACxB,MAAO,CACCC,CAAC,CAAED,CAAM,CAACE,IADX,CAECC,IAAI,CAAEH,CAAM,CAACG,IAFd,CAGCC,IAAI,CAAE,KAHP,CAKN,CAVC,CAWFC,cAAc,CAAE,wBAAUN,CAAV,CAAgBC,CAAhB,CAAwB,CAKpCA,CAAM,CAACG,IAAP,CAAcH,CAAM,CAACG,IAAP,EAAe,CAA7B,CAEA,MAAO,CACHG,OAAO,CAAEP,CAAI,CAACQ,KADX,CAEHC,UAAU,CAAE,CACRC,IAAI,CAAiB,EAAd,CAAAT,CAAM,CAACG,IAAR,CAAqBJ,CAAI,CAACW,WADxB,CAFT,CAMV,CAxBC,CAyBFC,KAAK,GAzBH,CAJuC,CAAjD,EAiCA1B,CAAC,CAAC,mCAAD,CAAD,CAAuCO,OAAvC,CAA+C,CAC3CC,WAAW,CAAE,6BAD8B,CAE3CC,UAAU,GAFiC,CAG3CC,kBAAkB,CAAEP,CAHuB,CAI3CQ,IAAI,CAAE,CACFC,GAAG,CAAE,oCADH,CAEFC,QAAQ,CAAE,MAFR,CAGFX,KAAK,CAAEA,CAHL,CAYFY,IAAI,CAAE,cAAUC,CAAV,CAAkB,CACxB,MAAO,CACCC,CAAC,CAAED,CAAM,CAACE,IADX,CAECC,IAAI,CAAEH,CAAM,CAACG,IAFd,CAGCC,IAAI,CAAE,KAHP,CAKN,CAlBC,CAmBFC,cAAc,CAAE,wBAAUN,CAAV,CAAgBC,CAAhB,CAAwB,CAKpCA,CAAM,CAACG,IAAP,CAAcH,CAAM,CAACG,IAAP,EAAe,CAA7B,CAEA,MAAO,CACHG,OAAO,CAAEP,CAAI,CAACQ,KADX,CAEHC,UAAU,CAAE,CACRC,IAAI,CAAiB,EAAd,CAAAT,CAAM,CAACG,IAAR,CAAqBJ,CAAI,CAACW,WADxB,CAFT,CAMV,CAhCC,CAiCFC,KAAK,GAjCH,CAJqC,CAA/C,CAwCH,CA9EE,CAgFV,CAjFK,CAAN","sourcesContent":["/*\n * @package    local_culrollover\n * @copyright  2016 Amanda Doughty\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n \n /**\n  * @module local_culrollover/selectcourses\n  */\n\n    define(['jquery', 'local_culrollover/select2'], function($) {\n        return {\n            initialise: function (delay, chars) {\n                // $.fn.select2.defaults.set(\"theme\", \"bootstrap\");\n                window.console.log(chars);\n                \n                $('.source_select select.custom-select').select2({\n                    placeholder: \"Select a source module\", // @TODO lang string\n                    allowClear: true,\n                    minimumInputLength: chars,\n                    ajax: {\n                        url: \"/local/culrollover/select2ajax.php\",\n                        dataType: 'json',\n                        delay: delay,\n                        data: function (params) {\n                        return {\n                                q: params.term, // search term\n                                page: params.page,\n                                type: 'src'\n                            };\n                        },\n                        processResults: function (data, params) {\n                            // parse the results into the format expected by Select2\n                            // since we are using custom formatting functions we do not need to\n                            // alter the remote JSON data, except to indicate that infinite\n                            // scrolling can be used\n                            params.page = params.page || 1;\n\n                            return {\n                                results: data.items,\n                                pagination: {\n                                    more: (params.page * 30) < data.total_count\n                                }\n                            };\n                        },                      \n                        cache: true\n                    }\n                });\n\n                $('.dest_select select.custom-select').select2({\n                    placeholder: \"Select a destination module\", // @TODO lang string\n                    allowClear: true,\n                    minimumInputLength: chars,\n                    ajax: {\n                        url: \"/local/culrollover/select2ajax.php\",\n                        dataType: 'json',\n                        delay: delay,\n                        // params: {\n                        //     error: function(err) {\n                        //         if (err.status == 0) {\n                        //             //this happens when typing too fast in the Select2 type-ahead - DO NOTHING!!\n                        //             $.console.log('Select2.js fast type-ahead error condition encountered and handled properly');\n                        //         }\n                        //     }\n                        // },\n                        data: function (params) {\n                        return {\n                                q: params.term, // search term\n                                page: params.page,\n                                type: 'dst'\n                            };\n                        },\n                        processResults: function (data, params) {\n                            // parse the results into the format expected by Select2\n                            // since we are using custom formatting functions we do not need to\n                            // alter the remote JSON data, except to indicate that infinite\n                            // scrolling can be used\n                            params.page = params.page || 1;\n\n                            return {\n                                results: data.items,\n                                pagination: {\n                                    more: (params.page * 30) < data.total_count\n                                }\n                            };\n                        },\n                        cache: true\n                    },\n                });\n            }\n        };\n    });\n"],"file":"selectcourses.min.js"}